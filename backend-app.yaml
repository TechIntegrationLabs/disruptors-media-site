name: disruptors-media-backend
services:
- name: admin-backend
  source_dir: admin.disruptorsmedia.com
  github:
    repo: TechIntegrationLabs/disruptors-media-site
    branch: main
    deploy_on_push: true
  build_command: composer install --no-dev --optimize-autoloader
  run_command: php artisan serve --host=0.0.0.0 --port=8080
  environment_slug: php
  instance_count: 1
  instance_size_slug: basic-xxs
  http_port: 8080
  routes:
  - path: /
  health_check:
    http_path: /
  envs:
  - key: APP_NAME
    value: "Disruptors Media Admin"
  - key: APP_ENV
    value: "production"
  - key: APP_DEBUG
    value: "false"
  - key: APP_URL
    value: "${APP_URL}"
  - key: APP_KEY
    value: "base64:YOUR_APP_KEY_HERE"
  - key: DB_CONNECTION
    value: "mysql"
  - key: DB_HOST
    value: "${db.HOSTNAME}"
  - key: DB_PORT
    value: "${db.PORT}"
  - key: DB_DATABASE
    value: "${db.DATABASE}"
  - key: DB_USERNAME
    value: "${db.USERNAME}"
  - key: DB_PASSWORD
    value: "${db.PASSWORD}"
  - key: CORS_ALLOWED_ORIGINS
    value: "https://disruptorsmedia.com,https://www.disruptorsmedia.com"
databases:
- name: db
  engine: MYSQL
  version: "8"
  size: db-s-1vcpu-1gb
  num_nodes: 1
  production: true
  cluster_name: disruptors-media-db